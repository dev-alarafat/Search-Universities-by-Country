<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <title>University Search</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/acodebytes.appspot.com/o/_f2043737-866e-4146-9458-7da191881d01.jpeg?alt=media&token=9d08c974-d4df-49ae-a0c4-e73b3156f895"/>
  <meta property="og:title" content="Search Universities by Country"/>
</head>

<body>
  <div class="container">
    <h1>Search Universities by Country</h1>

    <div class="row">
      <div class="col-12 mb-3">
        <label for="countrySelect">Choose Country:</label>
        <select class="form-select" id="countrySelect">
        </select>
      </div>
      <div class="col-12 my-1">
        <ul class="list-group" id="universityList">
        </ul>
      </div>
    </div>
  </div>

  <script>
    function populateCountries() {
      var country_list = ["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","BR","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State of","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Colombia","Congo","Congo, the Democratic Republic of the","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Côte d'Ivoire","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guyana","Haiti","Holy See - Vatican City State","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Korea, Democratic People's Republic of","Korea, Republic of","Kosovo","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova, Republic of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","North Macedonia","Norway","Oman","Pakistan","Palestine, State of","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Romania","Russian Federation","Rwanda","Réunion","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan","Tajikistan","Tanzania, United Republic of","Thailand","Togo","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","UK","US","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Venezuela, Bolivarian Republic of","Viet Nam","Vietnam","Virgin Islands, British","Yemen","Zambia","Zimbabwe"]

      var countrySelect = document.getElementById("countrySelect");

      country_list.forEach(country => {
        const option = document.createElement('option');
        option.value = country;
        option.textContent = country;
        countrySelect.appendChild(option);
      });

    }

    function searchUniversities(countryCode) {
      fetch(`https://doctor-strange.abdullah-alal20.repl.co/data?q=${countryCode}`)
        .then(response => response.json())
        .then(data => {
          const universityList = document.getElementById('universityList');
          if(data.length == 0){
            
          universityList.innerHTML = '<i>No university to show</i>';
          }else{
            
          universityList.innerHTML = '';
          }
          
          data.forEach(university => {
            const item = document.createElement('li');
            item.classList.add('list-group-item');
            item.innerHTML = `
                    <h5>${university.name}</h5>
                    <p>Website: 
                    <a href="${university.web_pages[0]}">${university.web_pages[0]}</a>
                    </p>
                  `;
            universityList.appendChild(item);
          });
        });
    }

    populateCountries();
    searchUniversities("Afghanistan");
    document.getElementById('countrySelect').addEventListener('change', (event) => {
      searchUniversities(event.target.value.split(" ").join("+"));
    });
  </script>
</body>

</html>
